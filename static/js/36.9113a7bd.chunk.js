"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[36],{4862:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(4165),i=t(5861),a=t(9396),c=t(2914),s=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.Z.get(c.v.product.PRODUCTS+"/"+n);case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),o=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.Z.get(c.v.product.PRODUCTS,{params:n});case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),u=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.Z.get(c.v.product.PRODUCTS_SHOP+"/"+n,{params:t});case 3:return i=e.sent,e.abrupt("return",i.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t){return e.apply(this,arguments)}}(),d=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.Z.get(c.v.product.PRODUCTS_REVIEWS+"/"+n,{params:t});case 3:return i=e.sent,e.abrupt("return",i.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t){return e.apply(this,arguments)}}(),l={getProduct:s,getAllProducts:o,getShopProducts:u,getProductReviews:d},p=t(3812),h=t(323),f=function(){var e=(0,h.C)((function(e){return e.product.products})),n=(0,h.T)(),t=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getAllProducts(t);case 2:if(!(i=e.sent).is_success){e.next=6;break}return n((0,p.Qs)(i.data)),e.abrupt("return",i.data);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),a=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getProduct(n);case 2:if(!(t=e.sent).is_success){e.next=5;break}return e.abrupt("return",t.data);case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),c=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getShopProducts(n,t);case 2:if(!(i=e.sent).is_success){e.next=5;break}return e.abrupt("return",i.data);case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),s=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getProductReviews(n,t);case 2:if(!(i=e.sent).is_success){e.next=5;break}return e.abrupt("return",i.data);case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return{products:e,fetchAllProducts:t,fetchProduct:a,fetchShopProducts:c,fetchProductReviews:s}}},9959:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(4165),i=t(5861),a=t(9439),c=t(2791),s=t(9396),o=t(2914),u=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t,i){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.get(o.v.shop.SHOPS_PROMOTION+"?status=".concat(n,"&page=").concat(t,"&limit=").concat(i));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t,r){return e.apply(this,arguments)}}(),d=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.get(o.v.shop.SHOPS_PROMOTION+"/".concat(n));case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),l=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.post(o.v.shop.SHOPS_PROMOTION,n);case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),p=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.put(o.v.shop.SHOPS_PROMOTION+"/".concat(n.id),n);case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),h={getAllShopPromotions:u,getShopPromotion:d,postShopPromotion:l,putShopPromotion:p},f=function(){var e=(0,c.useState)(!1),n=(0,a.Z)(e,2),t=n[0],s=n[1],o=(0,c.useState)(),u=(0,a.Z)(o,2),d=u[0],l=u[1],p=(0,c.useState)(),f=(0,a.Z)(p,2),v=f[0],x=f[1],m=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n,t,i){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,h.getAllShopPromotions(n,t,i);case 3:return a=e.sent,s(!1),a.is_success&&x(a.data),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),_=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,h.getShopPromotion(n);case 3:return t=e.sent,s(!1),t.is_success&&l(t.data),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),b=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,h.postShopPromotion(n);case 3:return t=e.sent,s(!1),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),j=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,h.putShopPromotion(n);case 3:return t=e.sent,s(!1),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return{fetchAllShopPromotions:m,fetchShopPromotion:_,addShopPromotion:b,updateShopPromotion:j,convertVariantProductToProductForm:function(e){var n=[];return e.filter((function(n,t){return t===e.findIndex((function(e){return n.product_id===e.product_id}))})).forEach((function(t,r){n[r]={id:t.product_id,name:t.product_name,in_form:!0,variants:[]},e.forEach((function(e){e.product_id===t.product_id&&n[r].variants.push({benefit:e.benefit,benefit_percentage:e.benefit_percentage,is_active:!0,quota:e.quota,variant_type_id:e.variant_type_id,variant_name:e.variant_type_name,max_buy_qty:e.max_buy_qty})}))})),n},addProductVariationFormNotActive:function(e,n){var t=[];return e.forEach((function(e,r){t[r]=e,n.forEach((function(n){var i;n.id===e.id&&(null===(i=n.variant_group)||void 0===i||i.variant_types.forEach((function(n){var i=!1;e.variants.forEach((function(e){n.id!==e.variant_type_id||(i=!0)})),i||t[r].variants.push({benefit:0,benefit_percentage:0,is_active:!1,max_buy_qty:0,quota:0,variant_name:n.name,variant_type_id:n.id})})))}))})),t},isLoading:t,shopPromotions:v,shopPromotion:d}}},3873:function(e,n,t){t.d(n,{Z:function(){return O}});var r=t(3433),i=t(1413),a=t(9439),c=t(1197),s=t(3635),o=t(9712),u=t(5863),d=t(6400),l=t(824),p=t(5777),h=t(5705),f=t(2791),v=t(9126),x=t(1724),m=t(4355),_=t(1089),b=t(5135),j=t(5987),g=t(8119),y=t(6088),Z=t(2965),w=["spacing","children"],P=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.filter(Boolean).join(" ")},S=function(e){return e?"":void 0},k=(0,y.Gp)((function(e,n){var t=(0,y.jC)("Switch",e),r=(0,Z.Lr)(e),a=r.spacing,c=void 0===a?"0.5rem":a,s=r.children,o=(0,j.Z)(r,w),u=(0,g.O)(o),d=u.state,l=u.getInputProps,p=u.getCheckboxProps,h=u.getRootProps,v=u.getLabelProps,x=(0,f.useMemo)((function(){return(0,i.Z)({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0},t.container)}),[t.container]),m=(0,f.useMemo)((function(){return(0,i.Z)({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer"},t.track)}),[t.track]),_=(0,f.useMemo)((function(){return(0,i.Z)({userSelect:"none",marginStart:c},t.label)}),[c,t.label]);return f.createElement(y.m$.label,(0,i.Z)((0,i.Z)({},h()),{},{className:P("chakra-switch",e.className),__css:x}),f.createElement("input",(0,i.Z)({className:"chakra-switch__input"},l({},n))),f.createElement(y.m$.span,(0,i.Z)((0,i.Z)({},p()),{},{className:"chakra-switch__track",__css:m}),f.createElement(y.m$.span,{__css:t.thumb,className:"chakra-switch__thumb","data-checked":S(d.isChecked),"data-hover":S(d.isHovered)})),s&&f.createElement(y.m$.span,(0,i.Z)((0,i.Z)({className:"chakra-switch__label"},v()),{},{__css:_}),s))}));k.displayName="Switch";var C=t(184);var R=function(e){return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(d.Od,{isLoaded:!e.isLoading,children:(0,C.jsx)(_.xJ,{border:"1px",rounded:"lg",borderColor:"gray.200",py:3,children:(0,C.jsxs)(_.iA,{variant:"unstyled",children:[(0,C.jsx)(_.hr,{children:(0,C.jsxs)(_.Tr,{children:[(0,C.jsx)(_.Th,{children:"Variant"}),(0,C.jsx)(_.Th,{isNumeric:!0,children:"Quota"}),(0,C.jsx)(_.Th,{isNumeric:!0,children:"Benefit"}),(0,C.jsx)(_.Th,{isNumeric:!0,children:"Benefit percentage"}),(0,C.jsx)(_.Th,{isNumeric:!0,children:"Max Buy"}),(0,C.jsx)(_.Th,{children:"Active"}),(0,C.jsx)(_.Th,{children:"action"})]})}),(0,C.jsx)(_.p3,{children:(0,C.jsx)(h.F2,{name:"products",render:function(n){return(0,C.jsxs)(C.Fragment,{children:[0===e.values.products.length?(0,C.jsx)(_.Tr,{children:(0,C.jsx)(_.Td,{colSpan:7,textAlign:"center",children:"Empty Data"})}):null,e.values.products.map((function(t,r){return(0,C.jsxs)(f.Fragment,{children:[(0,C.jsxs)(_.Tr,{bgColor:"gray.100",children:[(0,C.jsx)(_.Td,{colSpan:6,children:t.name}),(0,C.jsx)(_.Td,{children:e.isDisabled?null:(0,C.jsx)(b.u,{label:"Delete Product",children:(0,C.jsx)(p.hU,{"aria-label":"Delete",bgColor:"red",icon:(0,C.jsx)(v.yvY,{}),onClick:function(){e.onDeleteProduct(t.id),n.remove(r)}})})})]}),(0,C.jsx)(h.F2,{name:"products.".concat(r,".variants"),render:function(){return(0,C.jsx)(C.Fragment,{children:t.variants.map((function(n,t){return(0,C.jsxs)(_.Tr,{children:[(0,C.jsx)(_.Td,{children:(0,C.jsx)(o.xv,{children:n.variant_name})}),(0,C.jsx)(_.Td,{isNumeric:!0,children:(0,C.jsxs)(u.NI,{isInvalid:!!(0,h.u9)(e.errors,"products.".concat(r,".variants.").concat(t,".quota"))&&(0,h.u9)(e.touched,"products.".concat(r,".variants.").concat(t,".quota")),children:[(0,C.jsx)(h.gN,{as:l.II,type:"number",name:"products.".concat(r,".variants.").concat(t,".quota"),variant:e.isDisabled?"filled":"outline",isReadOnly:e.isDisabled}),(0,C.jsx)(u.J1,{children:(0,h.u9)(e.errors,"products.".concat(r,".variants.").concat(t,".quota"))})]})}),(0,C.jsx)(_.Td,{isNumeric:!0,children:(0,C.jsxs)(u.NI,{isInvalid:!!(0,h.u9)(e.errors,"products.".concat(r,".variants.").concat(t,".benefit"))&&(0,h.u9)(e.touched,"products.".concat(r,".variants.").concat(t,".benefit")),children:[(0,C.jsxs)(l.BZ,{children:[(0,C.jsx)(l.Ui,{children:"Rp"}),(0,C.jsx)(h.gN,{as:l.II,type:"number",name:"products.".concat(r,".variants.").concat(t,".benefit"),variant:e.isDisabled?"filled":"outline",isReadOnly:e.isDisabled})]}),(0,C.jsx)(u.J1,{children:(0,h.u9)(e.errors,"products.".concat(r,".variants.").concat(t,".benefit"))})]})}),(0,C.jsx)(_.Td,{isNumeric:!0,children:(0,C.jsxs)(u.NI,{isInvalid:!!(0,h.u9)(e.errors,"products.".concat(r,".variants.").concat(t,".benefit_percentage"))&&(0,h.u9)(e.touched,"products.".concat(r,".variants.").concat(t,".benefit_percentage")),children:[(0,C.jsxs)(l.BZ,{children:[(0,C.jsx)(h.gN,{as:l.II,type:"number",min:0,max:100,name:"products.".concat(r,".variants.").concat(t,".benefit_percentage"),variant:e.isDisabled?"filled":"outline",isReadOnly:e.isDisabled}),(0,C.jsx)(l.xW,{children:"%"})]}),(0,C.jsx)(u.J1,{children:(0,h.u9)(e.errors,"products.".concat(r,".variants.").concat(t,".benefit_percentage"))})]})}),(0,C.jsx)(_.Td,{isNumeric:!0,children:(0,C.jsxs)(u.NI,{isInvalid:!!(0,h.u9)(e.errors,"products.".concat(r,".variants.").concat(t,".max_buy_qty"))&&(0,h.u9)(e.touched,"products.".concat(r,".variants.").concat(t,".max_buy_qty")),children:[(0,C.jsx)(h.gN,{as:l.II,type:"number",name:"products.".concat(r,".variants.").concat(t,".max_buy_qty"),variant:e.isDisabled?"filled":"outline",isReadOnly:e.isDisabled}),(0,C.jsx)(u.J1,{children:(0,h.u9)(e.errors,"products.".concat(r,".variants.").concat(t,".max_buy_qty"))})]})}),(0,C.jsx)(_.Td,{children:(0,C.jsx)(k,{size:"lg",name:"products.".concat(r,".variants.").concat(t,".is_active"),isDisabled:e.isDisabled,isChecked:e.values.products[r].variants[t].is_active,onChange:function(n){e.handleChange(n)}})})]},t)}))})}})]},r)}))]})}})})]})})})})},T=t(5552),I=t(4862),q=t(3421);var D=function(e){var n,t,i,c=(0,I.Z)().fetchShopProducts,s=(0,f.useState)(),u=(0,a.Z)(s,2),d=u[0],l=u[1],h=(0,f.useState)([]),v=(0,a.Z)(h,2),x=v[0],m=v[1],b=function(e){return x.some((function(n){return n.id===e}))},j=function(e){var n,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=null===(n=e.variant_group)||void 0===n?void 0:n.variant_types.map((function(e){return{variant_type_id:e.id,variant_name:e.name,benefit:0,benefit_percentage:0,is_active:!0,max_buy_qty:0,quota:0}}));return{id:e.id,name:e.name,in_form:t,variants:r}};return(0,f.useEffect)((function(){c(1,{page:1,limit:5}).then((function(e){return l(e)}))}),[]),(0,f.useEffect)((function(){m((0,r.Z)(e.checkedProduct))}),[e.checkedProduct]),(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(T.u_,{isOpen:e.isOpen,onClose:e.onClose,size:"4xl",children:[(0,C.jsx)(T.ZA,{}),(0,C.jsxs)(T.hz,{rounded:"lg",children:[(0,C.jsx)(T.xB,{children:"Choose Product"}),(0,C.jsx)(T.ol,{}),(0,C.jsx)(T.fe,{children:(0,C.jsxs)(_.xJ,{children:[(0,C.jsxs)(_.iA,{children:[(0,C.jsx)(_.hr,{children:(0,C.jsxs)(_.Tr,{children:[(0,C.jsx)(_.Th,{children:"#"}),(0,C.jsx)(_.Th,{children:"Name"}),(0,C.jsx)(_.Th,{children:"Unit Sold"}),(0,C.jsx)(_.Th,{children:"Price"})]})}),(0,C.jsx)(_.p3,{children:null===d||void 0===d?void 0:d.data.map((function(e,n){return(0,C.jsxs)(_.Tr,{children:[(0,C.jsx)(_.Td,{children:(0,C.jsx)(g.XZ,{isDisabled:(t=e.id,x.some((function(e){return e.id===t&&e.in_form}))),isChecked:b(e.id),onChange:function(n){return function(e,n){var t=j(n);m(e?[].concat((0,r.Z)(x),[t]):x.filter((function(e){return e.id!==n.id})))}(n.target.checked,e)}})}),(0,C.jsx)(_.Td,{children:e.name}),(0,C.jsx)(_.Td,{children:e.unit_sold}),(0,C.jsxs)(_.Td,{children:["Rp",(0,q.xG)(e.lowest_price),"- Rp",(0,q.xG)(e.lowest_price)]})]},n);var t}))})]}),(0,C.jsxs)(o.kC,{pt:"5",justifyContent:"space-between",mb:5,children:[(0,C.jsxs)(o.xv,{fontSize:"sm",children:["Total ",null===d||void 0===d?void 0:d.total]}),(0,C.jsxs)(o.kC,{alignItems:"center",children:[(0,C.jsx)(p.zx,{size:"sm",isDisabled:(null!==(n=null===d||void 0===d?void 0:d.current_page)&&void 0!==n?n:0)<=1,fontWeight:"normal",onClick:function(){!function(){var e,n=(null!==(e=null===d||void 0===d?void 0:d.current_page)&&void 0!==e?e:0)-1;c(1,{page:n,limit:5}).then((function(e){return l(e)}))}()},children:"Prev"}),(0,C.jsxs)(o.xv,{px:3,children:[null===d||void 0===d?void 0:d.current_page," of ",null===d||void 0===d?void 0:d.total_page]}),(0,C.jsx)(p.zx,{size:"sm",isDisabled:(null!==(t=null===d||void 0===d?void 0:d.current_page)&&void 0!==t?t:0)>=(null!==(i=null===d||void 0===d?void 0:d.total_page)&&void 0!==i?i:0),fontWeight:"normal",onClick:function(){!function(){var e,n=(null!==(e=null===d||void 0===d?void 0:d.current_page)&&void 0!==e?e:0)+1;c(1,{page:n,limit:5}).then((function(e){return l(e)}))}()},children:"Next"})]})]})]})}),(0,C.jsxs)(T.mz,{justifyContent:"end",children:[(0,C.jsx)(p.zx,{variant:"ghost",mr:3,onClick:e.onClose,children:"Cancel"}),(0,C.jsx)(p.zx,{variant:"solid",colorScheme:"red",isLoading:e.isLoading,onClick:function(){return e.onConfirm(x)},children:"Confirm"})]})]})]})})};var O=function(e){var n=(0,c.qY)(),t=n.isOpen,_=n.onOpen,b=n.onClose,j=(0,m.Z)().errorToast,g=(0,f.useState)([]),y=(0,a.Z)(g,2),Z=y[0],w=y[1],P=x.Ry().shape({name:x.Z_().required("Required"),start_date:x.hT().required("Required"),expiry_date:x.hT().required("Required").min(x.iH("start_date"),"expiry date must be greater or equal than start date"),products:x.IX().of(x.Ry().shape({variants:x.IX().of(x.Ry().shape({quota:x.Rx().when("is_active",{is:!0,then:x.Rx().min(1,"Must be greater than 0").required("Required")}),benefit:x.Rx().when("is_active",{is:!0,then:x.Rx().required("Required")}),benefit_percentage:x.Rx().when("is_active",{is:!0,then:x.Rx().min(0,"min 0 and max 100").max(100,"min 0 and max 100").required("Required").when("benefit",{is:function(e){return e>0},then:function(e){return e.test("benefit_percentage","fill in one of the benefit or benefit percentage fields",(function(e){return void 0!==e&&0===e}))}}).when("benefit",{is:function(e){return 0===e},then:function(e){return e.test("benefit_percentage","fill in one of the benefit or benefit percentage fields",(function(e){return void 0!==e&&0!==e}))}})}),max_buy_qty:x.Rx().when("is_active",{is:!0,then:x.Rx().required("Required")})}))}))}),S={id:e.id,name:e.name,start_date:e.start_date,expiry_date:e.expiry_date,products:e.product};return(0,f.useEffect)((function(){w(e.product)}),[e.product]),(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(s.Zb,{variant:"outline",rounded:"lg",p:5,bgColor:"white",children:[(0,C.jsx)(s.Ol,{children:(0,C.jsx)(o.kC,{justifyContent:"space-between",children:(0,C.jsx)(o.xv,{fontSize:"2xl",fontWeight:"bold",children:e.title})})}),(0,C.jsx)(h.J9,{enableReinitialize:!0,initialValues:S,validationSchema:P,onSubmit:function(n){!function(n){var t=[];n.products.forEach((function(e){e.variants.forEach((function(n){if(n.is_active){var r={product_id:e.id,product_name:e.name,variant_type_id:n.variant_type_id,variant_type_name:n.variant_name,benefit:n.benefit,benefit_percentage:n.benefit_percentage,max_buy_qty:n.max_buy_qty,quota:n.quota};t.push(r)}}))}));var r={id:n.id,name:n.name,start_date:n.start_date,expiry_date:n.expiry_date,shop_promotion_products:t};r.shop_promotion_products.length<=0?j("Required product promotion min 1 active"):e.onSubmit(r)}(n)},children:function(n){var a=n.handleSubmit,c=n.handleChange,f=n.setValues,x=n.errors,m=n.touched,j=n.values;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("form",{onSubmit:a,children:[(0,C.jsxs)(s.eW,{children:[(0,C.jsxs)(o.MI,{columns:{base:1,sm:1,md:3},spacingX:10,spacingY:5,children:[(0,C.jsxs)(u.NI,{isInvalid:!!x.name&&m.name,children:[(0,C.jsx)(u.lX,{children:"Name"}),(0,C.jsx)(d.Od,{isLoaded:!e.isLoading,children:(0,C.jsx)(h.gN,{as:l.II,type:"text",name:"name",variant:e.isDisabled?"filled":"outline",isReadOnly:e.isDisabled})}),(0,C.jsx)(u.J1,{children:x.name})]}),(0,C.jsxs)(u.NI,{isInvalid:!!x.start_date&&m.start_date,children:[(0,C.jsx)(u.lX,{children:"Start Date"}),(0,C.jsx)(d.Od,{isLoaded:!e.isLoading,children:(0,C.jsx)(h.gN,{as:l.II,type:"datetime-local",name:"start_date",variant:e.isDisabled?"filled":"outline",isReadOnly:e.isDisabled})}),(0,C.jsx)(u.J1,{children:x.start_date})]}),(0,C.jsxs)(u.NI,{isInvalid:!!x.expiry_date&&m.expiry_date,children:[(0,C.jsx)(u.lX,{children:"Expiry Date"}),(0,C.jsx)(d.Od,{isLoaded:!e.isLoading,children:(0,C.jsx)(h.gN,{as:l.II,type:"datetime-local",name:"expiry_date",variant:e.isDisabled?"filled":"outline",isReadOnly:e.isDisabled})}),(0,C.jsx)(u.J1,{children:x.expiry_date})]})]}),(0,C.jsx)(o.iz,{my:10}),(0,C.jsxs)(o.kC,{justifyContent:"space-between",alignItems:"center",flexDirection:{base:"column",sm:"row"},my:5,children:[(0,C.jsx)(o.xv,{fontWeight:"medium",fontSize:"lg",children:"Product Promotion"}),e.isDisabled?null:(0,C.jsx)(p.zx,{leftIcon:(0,C.jsx)(v.Dwu,{}),variant:"outline",isDisabled:e.isDisabled,onClick:_,children:"Add Product"})]}),(0,C.jsx)(R,{values:j,errors:x,touched:m,isLoading:e.isLoading,isDisabled:e.isDisabled,handleChange:c,onDeleteProduct:function(e){return function(e){w(Z.filter((function(n){return n.id!==e})))}(e)}})]}),(0,C.jsx)(s.iR,{children:(0,C.jsxs)(p.hE,{spacing:"2",children:[(0,C.jsx)(p.zx,{variant:"solid",colorScheme:"gray",onClick:function(){return e.onCancel()},children:"Cancel"}),e.isDisabled?null:(0,C.jsx)(p.zx,{variant:"primary",type:"submit",isLoading:e.isLoading,children:"Save"})]})})]}),(0,C.jsx)(D,{isLoading:!1,isOpen:t,checkedProduct:Z,onClose:b,onConfirm:function(e){return function(e,n,t){var a=[];t.forEach((function(e){!1===e.in_form&&a.push((0,i.Z)((0,i.Z)({},e),{},{in_form:!0}))})),e((0,i.Z)((0,i.Z)({},n),{},{products:[].concat((0,r.Z)(n.products),a)})),w([].concat((0,r.Z)(Z),a)),b()}(f,j,e)}})]})}})]})})}}}]);
//# sourceMappingURL=36.9113a7bd.chunk.js.map
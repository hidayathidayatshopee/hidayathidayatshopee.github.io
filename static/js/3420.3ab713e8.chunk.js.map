{"version":3,"file":"static/js/3420.3ab713e8.chunk.js","mappings":"8QA0GA,UA3FA,WAA0B,IAAD,IACvB,GAAqCA,EAAAA,EAAAA,KAA7BC,EAAY,EAAZA,aAAcC,EAAU,EAAVA,WACdC,GAAOC,EAAAA,EAAAA,MAAPD,GACFE,GAAWC,EAAAA,EAAAA,MAEjB,GAAwCC,EAAAA,EAAAA,UAAkC,IAAG,eAAtEC,EAAY,KAAEC,EAAe,KAC5BC,GAAiBC,EAAAA,EAAAA,KAAjBD,aACR,GAOIE,EAAAA,EAAAA,KANFC,EAAkB,EAAlBA,mBACAC,EAAmB,EAAnBA,oBACAC,EAAkC,EAAlCA,mCACAC,EAAgC,EAAhCA,iCACAC,EAAS,EAATA,UACAC,EAAa,EAAbA,cAGIC,EAAyB,yCAAG,WAAOC,GAA8B,4FAC9CN,EAAoBM,GAAS,KAAD,GAA7CC,EAAQ,QACDC,YACXrB,EAAaoB,EAASE,SACtBlB,EAASmB,EAAAA,EAAAA,mBAETtB,EAAWmB,EAASE,SACrB,2CACF,gBAR8B,sCAUzBE,EAAoB,yCAAG,WAC3BjB,GAAqC,oFAE/BkB,EAA8B,GAAG,GAAD,OAEhBlB,GAAY,yDAAhB,OAAPmB,EAAO,iBACEjB,EAAaiB,EAAQxB,IAAI,KAAD,EAC9B,QADNyB,EAAG,SAEPF,EAASG,KAAKD,GACf,wKAGIF,GAAQ,gEAChB,gBAbyB,sCAmC1B,OANAI,EAAAA,EAAAA,YAAU,WACRjB,EAAmBkB,OAAO5B,IAAK6B,MAAK,SAACJ,IAfJ,SACjCK,GAEA,IAAMzB,EAAeO,EAAmCkB,GAExDR,EAAqBjB,GAAcwB,MAAK,SAACE,GACvC,IAAMC,EAA2BnB,EAC/BR,EACA0B,GAEFzB,EAAgB0B,EAClB,GACF,CAIIC,CAA2BR,EAAIS,KAAKC,wBACtC,GACF,GAAG,KAGD,+BACE,SAAC,IAAa,CACZnC,GAAqB,QAAnB,EAAe,OAAbe,QAAa,IAAbA,OAAa,EAAbA,EAAef,UAAE,QAAI,EACzBoC,KAAyB,QAArB,EAAe,OAAbrB,QAAa,IAAbA,OAAa,EAAbA,EAAeqB,YAAI,QAAI,GAC7BC,WACe,OAAbtB,QAAa,IAAbA,GAAAA,EAAesB,WACXC,IAAmB,OAAbvB,QAAa,IAAbA,OAAa,EAAbA,EAAesB,YAAYE,OAAO,oBACxC,GAENC,YACe,OAAbzB,QAAa,IAAbA,GAAAA,EAAeyB,YACXF,IAAmB,OAAbvB,QAAa,IAAbA,OAAa,EAAbA,EAAeyB,aAAaD,OAAO,oBACzC,GAENf,QAASnB,EACToC,YAAY,EACZ3B,UAAWA,EACX4B,SAAU,WACRxC,EAASmB,EAAAA,EAAAA,iBACX,EACAsB,SAAU,SAAC1B,GACTD,EAA0BC,EAC5B,EACA2B,MAAO,oBAIf,C","sources":["pages/Seller/Promotion/PromotionEdit.tsx"],"sourcesContent":["import dayjs from \"dayjs\";\nimport { useEffect, useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport useProduct from \"../../../hooks/useProduct\";\nimport useShopPromotion from \"../../../hooks/useShopPromotion\";\nimport useToast from \"../../../hooks/useToast\";\nimport { IProductPayload } from \"../../../interfaces/Product\";\nimport {\n  IPromotionProductForm,\n  IShopPromotionPayload,\n  IShopPromotionProductPayload,\n} from \"../../../interfaces/Promotion\";\nimport routes from \"../../../routes/Routes\";\nimport PromotionForm from \"./PromotionForm\";\n\nfunction PromotionEdit() {\n  const { successToast, errorToast } = useToast();\n  const { id } = useParams();\n  const navigate = useNavigate();\n\n  const [productsForm, setProductsForm] = useState<IPromotionProductForm[]>([]);\n  const { fetchProduct } = useProduct();\n  const {\n    fetchShopPromotion,\n    updateShopPromotion,\n    convertVariantProductToProductForm,\n    addProductVariationFormNotActive,\n    isLoading,\n    shopPromotion,\n  } = useShopPromotion();\n\n  const handleSubmitEditPromotion = async (payload: IShopPromotionPayload) => {\n    const response = await updateShopPromotion(payload);\n    if (response.is_success) {\n      successToast(response.message);\n      navigate(routes.SELLER_PROMOTION);\n    } else {\n      errorToast(response.message);\n    }\n  };\n\n  const fetchAllProductsEdit = async (\n    productsForm: IPromotionProductForm[]\n  ): Promise<IProductPayload[]> => {\n    const products: IProductPayload[] = [];\n\n    for (const product of productsForm) {\n      const res = await fetchProduct(product.id);\n      if (res !== null) {\n        products.push(res);\n      }\n    }\n\n    return products;\n  };\n\n  const handleConvertToProductForm = (\n    variantProducts: IShopPromotionProductPayload[]\n  ) => {\n    const productsForm = convertVariantProductToProductForm(variantProducts);\n\n    fetchAllProductsEdit(productsForm).then((resProducts) => {\n      const productsFormAllVariation = addProductVariationFormNotActive(\n        productsForm,\n        resProducts\n      );\n      setProductsForm(productsFormAllVariation);\n    });\n  };\n\n  useEffect(() => {\n    fetchShopPromotion(Number(id)).then((res) => {\n      handleConvertToProductForm(res.data.shop_promotion_products);\n    });\n  }, []);\n\n  return (\n    <>\n      <PromotionForm\n        id={shopPromotion?.id ?? 0}\n        name={shopPromotion?.name ?? \"\"}\n        start_date={\n          shopPromotion?.start_date\n            ? dayjs(shopPromotion?.start_date).format(\"YYYY-MM-DDTHH:mm\")\n            : \"\"\n        }\n        expiry_date={\n          shopPromotion?.expiry_date\n            ? dayjs(shopPromotion?.expiry_date).format(\"YYYY-MM-DDTHH:mm\")\n            : \"\"\n        }\n        product={productsForm}\n        isDisabled={false}\n        isLoading={isLoading}\n        onCancel={() => {\n          navigate(routes.SELLER_PROMOTION);\n        }}\n        onSubmit={(payload) => {\n          handleSubmitEditPromotion(payload);\n        }}\n        title={\"Edit Promotion\"}\n      />\n    </>\n  );\n}\n\nexport default PromotionEdit;\n"],"names":["useToast","successToast","errorToast","id","useParams","navigate","useNavigate","useState","productsForm","setProductsForm","fetchProduct","useProduct","useShopPromotion","fetchShopPromotion","updateShopPromotion","convertVariantProductToProductForm","addProductVariationFormNotActive","isLoading","shopPromotion","handleSubmitEditPromotion","payload","response","is_success","message","routes","fetchAllProductsEdit","products","product","res","push","useEffect","Number","then","variantProducts","resProducts","productsFormAllVariation","handleConvertToProductForm","data","shop_promotion_products","name","start_date","dayjs","format","expiry_date","isDisabled","onCancel","onSubmit","title"],"sourceRoot":""}
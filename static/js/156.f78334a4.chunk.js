"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[156],{5103:function(e,t,n){var r=n(4165),i=n(5861),a=n(9396),s=n(2914),c=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.Z.post(s.v.transaction.CHECKOUT,t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.Z.post(s.v.transaction.TRANSACTIONS,t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.Z.get(s.v.transaction.TRANSACTIONS,{params:t});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.Z.get(s.v.transaction.TRANSACTIONS+"/"+t);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),u={createCheckout:c,getTransactionHistory:l,createTransaction:o,getTransactionDetail:d};t.Z=u},9223:function(e,t,n){var r=n(9712),i=n(4828),a=n(3421),s=n(184);t.Z=function(e){var t=e.name,n=e.qty,c=e.total,o=e.variantName,l=e.onClick,d=e.disabled,u=e.productPhoto;return(0,s.jsxs)(r.Ug,{alignItems:"start",gap:3,width:"100%",children:[(0,s.jsx)(r.oM,{ratio:1,minWidth:"4em",borderRadius:"lg",children:(0,s.jsx)(i.Ee,{src:u,alt:t,fallbackSrc:"./image-fallback.png",borderRadius:"lg",opacity:d?.5:1})}),(0,s.jsxs)(r.gC,{alignItems:"flex-start",width:"40%",spacing:1,children:[(0,s.jsx)(r.xv,{textTransform:"uppercase",fontWeight:"bold",onClick:l,opacity:d?.5:1,_hover:{textDecoration:d?"none":"underline"},children:t}),(0,s.jsxs)(r.xv,{fontWeight:"semibold",fontSize:"xs",color:"gray.500",children:[o," - ",n," item(s)"]}),(0,s.jsxs)(r.xv,{color:"darkDarken",fontSize:"sm",fontWeight:"bold",opacity:d?.5:1,children:["Rp",(0,a.xG)(c)]})]})]})}},2769:function(e,t,n){var r=n(9712),i=n(184);t.Z=function(e){var t=e.shopName,n=e.shopCityName;return(0,i.jsxs)(r.gC,{alignItems:"start",spacing:0,pb:3,children:[(0,i.jsx)(r.xv,{fontWeight:"bold",children:t}),(0,i.jsx)(r.xv,{fontSize:"sm",fontWeight:"semibold",color:"gray.500",children:n})]})}},7005:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(1413),i=n(9439),a=n(7229),s=n(9712),c=n(5777),o=n(824),l=n(2791),d=n(9986);var u=function(e,t){var n=(0,l.useRef)();return(0,l.useEffect)((function(){return function(){n.current&&clearTimeout(n.current)}}),[]),function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=setTimeout((function(){e.apply(void 0,i)}),t);clearTimeout(n.current),n.current=s}},h=n(184);var p=function(e){var t=e.disabled,n=e.minQty,p=e.maxQty,x=e.stock,f=e.defaultValue,m=e.onQuantityChange,g=(0,l.useState)(null!==f&&void 0!==f?f:1),j=(0,i.Z)(g,2),v=j[0],b=j[1],y=(0,a.MM)({focusInputOnChange:!1,defaultValue:null!==f&&void 0!==f?f:1,min:n&&n>1?n:1,max:p&&p>0&&p<x?p:x>0?x:1,isDisabled:t,onChange:function(e,t){""!==e&&b(t)},value:v}),C=y.getInputProps,Z=y.getIncrementButtonProps,w=y.getDecrementButtonProps,_=u(m,1e3);return(0,l.useEffect)((function(){_(v)}),[v]),(0,l.useEffect)((function(){b(null!==f&&void 0!==f?f:1)}),[x]),(0,h.jsxs)(s.Ug,{ms:-2,my:3,children:[(0,h.jsx)(c.hU,(0,r.Z)({"aria-label":"minus",icon:(0,h.jsx)(d.Z.Minus,{fill:"primary"}),variant:"quantity"},w())),(0,h.jsx)(o.II,(0,r.Z)((0,r.Z)({},C()),{},{border:"none",textAlign:"center",_focusVisible:{outline:"none"},fontWeight:"semibold",variant:"quantity",maxW:20})),(0,h.jsx)(c.hU,(0,r.Z)({"aria-label":"plus",icon:(0,h.jsx)(d.Z.Plus,{fill:"primary"}),variant:"quantity"},Z()))]})}},5947:function(e,t,n){var r=n(4165),i=n(5861),a=n(6852),s=n(5103);t.Z=function(){var e=(0,a.pm)(),t=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.Z.createCheckout(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){var i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.createTransaction(n);case 2:return(i=t.sent).is_success?e({title:"Order created",status:"success",duration:3e3,position:"top",isClosable:!0}):e({title:"Failed to create order",description:i.message,status:"error",duration:3e3,position:"top",isClosable:!0}),t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{createCheckout:t,createTransaction:n}}},2618:function(e,t,n){var r=n(2791);t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"BAZR",t=document.getElementById("title");(0,r.useEffect)((function(){t.innerHTML=e}),[e])}},6156:function(e,t,n){n.r(t),n.d(t,{default:function(){return z}});var r=n(4942),i=n(1413),a=n(4165),s=n(5861),c=n(3433),o=n(9439),l=n(1197),d=n(6852),u=n(9712),h=n(8119),p=n(5777),x=n(5552),f=n(2791),m=n(7689),g=n(9986),j=n(2769),v=n(6459),b=n(5668),y=n(8802),C=n(9223),Z=n(7005),w=n(184),_=function(e){var t=Object.assign({},((0,v.Z)(e),e)),n=(0,m.s0)(),r=(0,b.Z)().updateCart,i=!t.data.stock||t.data.stock<t.data.min_buy_qty;return(0,w.jsxs)(u.xu,{backgroundColor:i?"lightLighten":"transparent",children:[(0,w.jsxs)(u.Ug,{width:"100%",pt:3,alignItems:"start",gap:2,children:[(0,w.jsx)(h.XZ,{isChecked:t.selectedCart,colorScheme:"default",onChange:function(e){return t.handleSelectItem(e,t.data.cart_id,t.data.shop_id)},disabled:i}),(0,w.jsx)(C.Z,{name:t.data.product_name,qty:t.data.quantity,total:t.data.variant_type_price,variantName:t.data.variant_type_name.split(",").join(", "),onClick:function(){return n(y.Z.PDP(t.data.product_id,t.data.product_name))},disabled:i,productPhoto:t.data.product_photo},t.data.variant_type_id)]}),(0,w.jsxs)(u.kC,{alignItems:"center",width:"100%",justifyContent:"space-between",mb:3,flexDirection:{base:"column",sm:"column",md:"row",lg:"row",xl:"row"},children:[(0,w.jsx)(p.zx,{variant:"unstyled",marginStart:"2.75em",color:"primary",textAlign:"start",fontSize:"xs",disabled:i,children:"Add Notes"}),(0,w.jsxs)(u.Ug,{spacing:5,justifyContent:"end",alignItems:"center",width:"100%",children:[i&&(0,w.jsx)(u.xv,{fontSize:"xs",color:"dark",fontWeight:"semibold",children:"Out of stock"}),(0,w.jsx)(p.hU,{variant:"unstyled","aria-label":"delete",icon:(0,w.jsx)(g.Z.Trash,{boxSize:4,fill:i?"red":"dark"}),onClick:function(){return t.handleDeleteItem(t.data.cart_id)}}),(0,w.jsx)(Z.Z,{onQuantityChange:function(e){e!==t.data.quantity&&r({quantity:e-t.data.quantity,shop_id:t.data.shop_id,variant_type_id:t.data.variant_type_id})},maxQty:t.data.max_buy_qty,minQty:t.data.min_buy_qty,stock:t.data.stock,defaultValue:t.data.quantity,disabled:i})]})]})]})},k=function(e){return(0,w.jsx)(u.xu,{py:2,px:3,width:{base:"15em",sm:"20em",md:"20em",lg:"20em",xl:"20em"},color:"white",backgroundColor:"primary",borderRadius:"lg",mx:"auto",children:(0,w.jsxs)(u.Ug,{width:"100%",justifyContent:"space-between",children:[(0,w.jsx)(u.xv,{fontSize:{base:"sm",sm:"md",md:"lg",lg:"lg",xl:"lg"},children:e.description}),(0,w.jsx)(p.zx,{variant:"unstyled",onClick:e.onClick,children:e.isUpdated?"OK":"Undo"})]})})},I=n(5947),S=n(2618),T=n(3421),z=function(){(0,S.Z)("Cart | BAZR");var e=(0,b.Z)(),t=e.cart,n=e.setCheckoutData,v=e.deleteCart,C=e.deleteItem,Z=e.undoDeleteItem,z=e.setCheckoutCartIds,R=(0,l.qY)(),U=R.isOpen,W=R.onOpen,O=R.onClose,A=(0,m.s0)(),E=(0,d.pm)(),N=(0,f.useRef)(),P=(0,I.Z)().createCheckout,q=(0,f.useState)(!1),D=(0,o.Z)(q,2),G=D[0],B=D[1],M=(0,f.useState)({}),Q=(0,o.Z)(M,2),V=Q[0],H=Q[1],X=(0,f.useState)({}),F=(0,o.Z)(X,2),K=F[0],L=F[1],Y=(0,f.useState)([]),J=(0,o.Z)(Y,2),$=J[0],ee=J[1],te=(0,f.useState)(0),ne=(0,o.Z)(te,2),re=ne[0],ie=ne[1],ae=function(e,n,r){e.currentTarget.checked?ee([].concat((0,c.Z)($),[t.find((function(e){return e.cart_id===n&&e.shop_id===r}))])):ee($.filter((function(e){return e.cart_id!==n&&e.shop_id!==r})))},se=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],r=[],$.forEach((function(e){var n;0===t.length||-1===t.findIndex((function(t){return t.shop_id===e.shop_id}))?t=[].concat((0,c.Z)(t),[{shop_id:e.shop_id,order_details:[{cart_id:e.cart_id}]}]):null===(n=t.find((function(t){return t.shop_id===e.shop_id})))||void 0===n||n.order_details.push({cart_id:e.cart_id});r.push(e.cart_id)})),e.next=5,P({orders:t});case 5:(i=e.sent).is_success&&(n(i.data),z(r),A(y.Z.CART_SHIPMENT,{replace:!0}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(e){C(e),N.current&&E.isActive(N.current)&&E.close(N.current),N.current=E({description:"Item deleted.",duration:3e3,position:"top",onCloseComplete:function(){v(e)},render:function(e){return(0,w.jsx)(k,{description:e.description,isUpdated:!1,onClick:function(){return B(!0)}})}})};return(0,f.useEffect)((function(){N.current&&G&&(Z(),E.update(N.current,{description:"Success undo delete item.",duration:3e3,position:"top",onCloseComplete:function(){},render:function(e){return(0,w.jsx)(k,{description:e.description,isUpdated:!0,onClick:function(){return E.close(N.current)}})}}),B(!1))}),[G]),(0,f.useEffect)((function(){var e={all:0!==t.length&&$.length===t.length};Object.keys(K).forEach((function(t){e[t]=$.filter((function(e){return e.shop_id===parseInt(t)})).length===Object.values(K[parseInt(t)]).length}));var n=$.reduce((function(e,t){return e+t.variant_type_price*t.quantity}),0);ie(n),H((0,i.Z)({},e))}),[$]),(0,f.useEffect)((function(){if(0!==t.length){var e={};t.forEach((function(t){e[t.shop_id]=(0,i.Z)((0,i.Z)({},e[t.shop_id]),{},(0,r.Z)({},t.cart_id,t))})),L(e)}}),[t]),(0,w.jsx)(u.W2,{maxW:"container.xl",children:(0,w.jsx)(u.xu,{px:{base:"1em",sm:"2em",md:"3em",lg:"4em",xl:"4em"},py:{base:"1em",sm:"1.5em",md:"2em",lg:"2.5em",xl:"4em"},children:0!==t.length?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(u.X6,{pb:3,size:{base:"md",sm:"lg"},children:"Cart"}),(0,w.jsxs)(u.rj,{templateColumns:"repeat(3, 1fr)",gap:10,width:"100%",mb:{base:"7em",sm:"6em",md:"6em",lg:0,xl:0},children:[(0,w.jsx)(u.P4,{colSpan:{base:3,sm:3,md:3,lg:2,xl:2},children:(0,w.jsxs)(u.gC,{spacing:5,children:[(0,w.jsxs)(u.xu,{width:"100%",children:[(0,w.jsxs)(u.Ug,{justifyContent:"space-between",children:[(0,w.jsx)(h.XZ,{isChecked:V.all,onChange:function(e){e.currentTarget.checked?ee(t):ee([])},textTransform:"uppercase",fontWeight:"extrabold",spacing:4,colorScheme:"default",children:"Select All"}),(0,w.jsx)(p.zx,{variant:"unstyled",color:"primary",fontSize:"xs",visibility:0!==$.length?"initial":"hidden",children:"Clear cart"})]}),(0,w.jsx)(u.iz,{})]}),Object.entries(K).map((function(e,n){var r,i=(0,o.Z)(e,2),a=i[0],s=i[1];return(0,w.jsxs)(u.xu,{width:"100%",children:[(0,w.jsxs)(u.xu,{width:"100%",children:[(0,w.jsxs)(u.Ug,{alignItems:"start",gap:2,children:[(0,w.jsx)(h.XZ,{isChecked:V[a],onChange:function(e){return function(e,n){e.currentTarget.checked?ee([].concat((0,c.Z)($),(0,c.Z)(t.filter((function(e){return e.shop_id===n}))))):ee($.filter((function(e){return e.shop_id!==n})))}(e,parseInt(a))},mt:1,colorScheme:"default"}),(0,w.jsx)(j.Z,{shopName:null===(r=Object.values(s).at(0))||void 0===r?void 0:r.shop_name,shopCityName:"Bandung"})]}),(0,w.jsx)(u.gC,{children:Object.values(s).map((function(e,t){return(0,w.jsxs)(u.xu,{width:"100%",children:[(0,w.jsx)(_,{handleSelectItem:ae,data:e,selectedCart:-1!==$.findIndex((function(t){return t.cart_id===e.cart_id})),handleDeleteItem:ce}),t<Object.values(s).length-1&&(0,w.jsx)(u.iz,{borderBottomWidth:"0.1em"})]},e.cart_id)}))})]}),n<Object.entries(K).length&&(0,w.jsx)(u.iz,{})]},a)}))]})}),(0,w.jsx)(u.P4,{colSpan:1,display:{base:"none",sm:"none",md:"none",lg:"block",xl:"block"},children:(0,w.jsxs)(u.gC,{boxShadow:"md",p:4,spacing:5,borderRadius:"lg",children:[(0,w.jsx)(p.zx,{variant:"outline",width:"100%",borderRadius:"lg",children:(0,w.jsxs)(u.Ug,{justifyContent:"space-between",alignItems:"center",width:"100%",children:[(0,w.jsx)(u.xv,{fontWeight:"semibold",children:"Select Voucher"}),(0,w.jsx)(g.Z.ChevronRight,{})]})}),(0,w.jsx)(u.iz,{}),(0,w.jsx)(u.xv,{fontWeight:"bold",textAlign:"start",width:"100%",textTransform:"uppercase",children:"Order Summary"}),(0,w.jsxs)(u.gC,{alignItems:"start",width:"100%",spacing:0,children:[(0,w.jsxs)(u.Ug,{justifyContent:"space-between",alignItems:"center",width:"100%",children:[(0,w.jsx)(u.xv,{fontWeight:"semibold",fontSize:"sm",color:"gray.500",children:"Total Price (Item)"}),(0,w.jsxs)(u.xv,{fontWeight:"semibold",fontSize:"sm",color:"gray.500",children:["Rp",(0,T.xG)(re)]})]}),(0,w.jsxs)(u.Ug,{justifyContent:"space-between",alignItems:"center",width:"100%",children:[(0,w.jsx)(u.xv,{fontWeight:"semibold",fontSize:"sm",color:"gray.500",children:"Total Discount Item(s)"}),(0,w.jsxs)(u.xv,{fontWeight:"semibold",fontSize:"sm",color:"gray.500",children:["Rp",(0,T.xG)(0)]})]})]}),(0,w.jsx)(u.iz,{borderBottomWidth:"0.1em"}),(0,w.jsxs)(u.Ug,{justifyContent:"space-between",alignItems:"center",width:"100%",fontWeight:"bold",textAlign:"start",children:[(0,w.jsx)(u.xv,{textTransform:"uppercase",children:"Grand Total"}),(0,w.jsxs)(u.xv,{color:"primary",children:["Rp",(0,T.xG)(re)]})]}),(0,w.jsxs)(p.zx,{borderRadius:"lg",width:"100%",shadow:"none",onClick:se,variant:"primary",isDisabled:0===$.length,children:["Checkout (",$.length,")"]})]})})]}),(0,w.jsx)(u.xu,{background:"white",position:"fixed",right:0,bottom:0,left:0,p:5,borderTop:"1px",borderColor:"primary",display:{base:"block",sm:"block",md:"block",lg:"none",xl:"none"},children:(0,w.jsxs)(u.gC,{spacing:5,children:[(0,w.jsx)(p.zx,{variant:"outline",width:"100%",borderRadius:"lg",children:(0,w.jsxs)(u.Ug,{justifyContent:"space-between",alignItems:"center",width:"100%",children:[(0,w.jsx)(g.Z.Plus,{}),(0,w.jsx)(u.xv,{fontWeight:"semibold",children:"Select Voucher"}),(0,w.jsx)(g.Z.ChevronRight,{})]})}),(0,w.jsxs)(u.Ug,{width:"100%",justifyContent:"space-between",children:[(0,w.jsxs)(u.gC,{alignItems:"start",children:[(0,w.jsx)(u.xv,{children:"Total Price"}),(0,w.jsxs)(u.Ug,{spacing:0,children:[(0,w.jsxs)(u.xv,{fontWeight:"semibold",children:["Rp",(0,T.xG)(re)]}),(0,w.jsx)(p.hU,{size:"md","aria-label":"chevron up",variant:"ghost",icon:(0,w.jsx)(g.Z.ChevronUp,{}),onClick:W})]})]}),(0,w.jsxs)(p.zx,{borderRadius:"lg",shadow:"none",onClick:se,variant:0===$.length?"basicOutline":"primary",isDisabled:0===$.length,children:["Buy (",$.length,")"]})]})]})}),(0,w.jsxs)(x.dy,{placement:"bottom",onClose:O,isOpen:U,children:[(0,w.jsx)(x.P1,{}),(0,w.jsxs)(x.sc,{children:[(0,w.jsx)(x.OX,{children:"Shopping summary"}),(0,w.jsxs)(x.Ng,{children:[(0,w.jsxs)(u.Ug,{justifyContent:"space-between",alignItems:"center",width:"100%",children:[(0,w.jsx)(u.xv,{children:"Total Price (Item)"}),(0,w.jsxs)(u.xv,{children:["Rp",(0,T.xG)(re)]})]}),(0,w.jsxs)(u.Ug,{justifyContent:"space-between",alignItems:"center",width:"100%",children:[(0,w.jsx)(u.xv,{children:"Total Discount Item(s)"}),(0,w.jsxs)(u.xv,{children:["Rp",(0,T.xG)(0)]})]})]}),(0,w.jsx)(x.ze,{borderTopWidth:"1px",children:(0,w.jsxs)(u.Ug,{justifyContent:"space-between",alignItems:"center",width:"100%",fontWeight:"semibold",children:[(0,w.jsx)(u.xv,{children:"Grand Total"}),(0,w.jsxs)(u.xv,{children:["Rp",(0,T.xG)(re)]})]})})]})]})]}):(0,w.jsx)(u.M5,{children:(0,w.jsxs)(u.gC,{children:[(0,w.jsx)(u.xv,{children:"Your Cart is Empty"}),(0,w.jsx)(p.zx,{borderRadius:"lg",shadow:"none",color:"white",onClick:function(){return A(y.Z.HOME,{replace:!0})},children:"Shop Now"})]})})})})}}}]);
//# sourceMappingURL=156.f78334a4.chunk.js.map
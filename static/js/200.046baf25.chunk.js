"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[200],{60200:function(e,t,n){n.r(t);var r=n(74165),i=n(93433),a=n(15861),o=n(4942),s=n(1413),c=n(29439),l=n(84959),d=n(43964),u=n(65098),h=n(69748),x=n(53068),m=n(31002),p=n(52192),w=n(88679),j=n(47313),f=n(58467),g=n(36777),C=n(73921),y=n(82195),v=n(84893),b=n(29134),k=n(72849),_=n(45598),Z=n(46036),I=n(43974),D=(n(54568),n(46417));t.default=function(){var e,t,n,E=(0,j.useState)([]),S=(0,c.Z)(E,2),N=S[0],P=S[1],U=(0,j.useState)({primaryCat:void 0,secondaryCat:void 0,tertiaryCat:void 0}),L=(0,c.Z)(U,2),O=L[0],Q=L[1],T=(0,j.useState)(!1),z=(0,c.Z)(T,2),V=z[0],q=z[1],M=(0,j.useState)([]),R=(0,c.Z)(M,2),A=R[0],B=R[1],K=(0,j.useState)([]),G=(0,c.Z)(K,2),X=G[0],F=G[1],Y=(0,j.useState)({productName:"",productDescription:"",defaultPrice:"",defaultStock:"",weight:"",dangerousGoods:"false",condition:"New",SKU:"",minQty:"",maxQty:""}),H=(0,c.Z)(Y,2),W=H[0],J=H[1],$=(0,j.useState)(!1),ee=(0,c.Z)($,2),te=ee[0],ne=ee[1],re=(0,b.Z)().categories,ie=(0,Z.Z)().user,ae=(0,k.Z)(),oe=ae.uploadProductPhoto,se=ae.createShopProduct,ce=(0,l.qY)(),le=ce.isOpen,de=ce.onOpen,ue=ce.onClose,he=(0,f.s0)(),xe=(0,_.Z)(),me=xe.successToast,pe=xe.errorToast;(0,j.useEffect)((function(){}),[N,X,A,W,O]);var we=function(e){J((0,s.Z)((0,s.Z)({},W),{},(0,o.Z)({},e.currentTarget.id,e.currentTarget.value)))},je=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne(!0),e.prev=1,t={name:"",description:"",primary_category_id:0,secondary_category_id:0,tertiary_category_id:0,is_hazardous:!1,weight:0,internal_sku:"",condition:"",min_buy_qty:0,shop_id:0,photos:[],variant_group:{name:"",variant_type:[]}},null!==ie&&void 0!==ie&&ie.shop_id){e.next=5;break}throw new Error("Seller shop_id missing");case 5:if(t.shop_id=null===ie||void 0===ie?void 0:ie.shop_id,O.primaryCat&&O.secondaryCat&&O.tertiaryCat){e.next=8;break}throw new Error("Please select a category");case 8:if(t.primary_category_id=O.primaryCat.id,t.secondary_category_id=O.secondaryCat.id,t.tertiary_category_id=O.tertiaryCat.id,0!==N.length){e.next=13;break}throw new Error("Please upload at least one product image");case 13:if(V){e.next=21;break}if(!(Number(W.defaultPrice)<=0||Number(W.defaultStock)<=0)){e.next=16;break}throw new Error("Missing fields price or stock for product");case 16:t.variant_group.name="DEFAULT",n={name:"DEFAULT",stock:Number(W.defaultStock),price:Number(W.defaultPrice)},t.variant_group.variant_type=[n],e.next=34;break;case 21:if(0!==X.length){e.next=23;break}throw new Error("Missing variant type");case 23:if(""!==A[0].vg_name){e.next=25;break}throw new Error("Variant 1 name must not be empty");case 25:if(1!==A.length){e.next=30;break}t.variant_group.name=A[0].vg_name,X.forEach((function(e){if(""===e.vtOne_name)throw new Error("Variant type must not be empty");var n={name:e.vtOne_name,price:Number(e.price),stock:Number(e.stock)};t.variant_group.variant_type=[].concat((0,i.Z)(t.variant_group.variant_type),[n])})),e.next=34;break;case 30:if(""!==A[1].vg_name){e.next=32;break}throw new Error("Variant 2 name must not be empty");case 32:t.variant_group.name=A[0].vg_name+","+A[1].vg_name,X.forEach((function(e){if(""===e.vtOne_name||""===e.vtTwo_name)throw new Error("Variant type must not be empty");var n={name:e.vtOne_name+","+e.vtTwo_name,price:Number(e.price),stock:Number(e.stock)};t.variant_group.variant_type=[].concat((0,i.Z)(t.variant_group.variant_type),[n])}));case 34:if(""!==W.productName){e.next=36;break}throw new Error("Missing field name");case 36:if(t.name=W.productName,""!==W.productDescription){e.next=39;break}throw new Error("Missing field description");case 39:if(t.description=W.productDescription,!(""===W.weight||Number(W.weight)<=0)){e.next=42;break}throw new Error("Missing or invalid weight field");case 42:if(t.weight=Number(W.weight),!(""===W.minQty||Number(W.minQty)<1)){e.next=45;break}throw new Error("Missing minimum qty, or must be greater than 0.");case 45:return t.min_buy_qty=Number(W.minQty),""===W.maxQty||Number(W.maxQty)<1||(t.max_buy_qty=Number(W.maxQty)),t.condition=W.condition,t.is_hazardous=JSON.parse(W.dangerousGoods),t.internal_sku=W.SKU,a={photos:N},e.next=53,oe(a);case 53:if((o=e.sent).is_success){e.next=56;break}throw new Error(o.message);case 56:return o.data.urls.forEach((function(e){var n={url:e};t.photos=[].concat((0,i.Z)(t.photos),[n])})),e.next=59,se(t);case 59:if((s=e.sent).is_success){e.next=62;break}throw new Error(s.message);case 62:me("Product successfully created"),ne(!1),he(I.Z.SELLER_PRODUCT),e.next=72;break;case 67:e.prev=67,e.t0=e.catch(1),pe(e.t0.message),window.scrollTo(0,0),ne(!1);case 72:case"end":return e.stop()}}),e,null,[[1,67]])})));return function(){return e.apply(this,arguments)}}();return(0,D.jsxs)(d.xu,{width:"100%",children:[(0,D.jsxs)(d.kC,{flexDirection:"column",p:8,backgroundColor:"whiteAlpha.800",children:[(0,D.jsx)(d.X6,{mb:8,noOfLines:1,children:"Basic Information"}),(0,D.jsxs)(d.gC,{justifyContent:"center",alignItems:"center",spacing:8,children:[(0,D.jsxs)(d.kC,{flexDirection:"row",width:"70%",children:[(0,D.jsxs)(d.kC,{width:"30%",children:[(0,D.jsx)(d.xv,{textColor:"tomato",children:"*"}),(0,D.jsx)(d.xv,{children:"Product Images"})]}),(0,D.jsxs)(d.Eq,{width:"70%",children:[N.map((function(e,t){return(0,D.jsxs)(d.Uc,{className:"imgContainer",children:[(0,D.jsx)(u.Ee,{loading:"lazy",src:URL.createObjectURL(e),width:"120px",height:"120px"}),(0,D.jsx)(h.hU,{className:"deleteImgBtn",icon:(0,D.jsx)(g.Z.Trash,{}),variant:"solid",colorScheme:"orange","aria-label":"Delete Image",onClick:function(){P(N.filter((function(e,n){return n!==t})))}})]},t)})),(0,D.jsx)(d.Uc,{children:(0,D.jsx)(y.Z,{imgList:N,setImgList:P})})]})]}),(0,D.jsxs)(d.kC,{flexDirection:"row",justifyContent:"space-between",width:"70%",children:[(0,D.jsxs)(d.kC,{children:[(0,D.jsx)(d.xv,{textColor:"tomato",children:"*"}),(0,D.jsx)(d.xv,{children:"Product Name"})]}),(0,D.jsx)(x.II,{id:"productName",placeholder:"Enter product name",width:"70%",value:W.productName,onChange:we})]}),(0,D.jsxs)(d.kC,{flexDirection:"row",justifyContent:"space-between",width:"70%",children:[(0,D.jsxs)(d.kC,{children:[(0,D.jsx)(d.xv,{textColor:"tomato",children:"*"}),(0,D.jsx)(d.xv,{children:"Category"})]}),(0,D.jsxs)(h.zx,{width:"70%",onClick:de,justifyContent:"space-between",children:[(0,D.jsx)(d.xv,{children:null!==(e=O.primaryCat)&&void 0!==e&&e.name&&null!==(t=O.secondaryCat)&&void 0!==t&&t.name&&null!==(n=O.tertiaryCat)&&void 0!==n&&n.name?O.primaryCat.name+" > "+O.secondaryCat.name+" > "+O.tertiaryCat.name:"Set Category"}),(0,D.jsx)(g.Z.Pencil,{})]})]}),(0,D.jsxs)(d.kC,{flexDirection:"row",justifyContent:"space-between",width:"70%",children:[(0,D.jsxs)(d.kC,{children:[(0,D.jsx)(d.xv,{textColor:"tomato",children:"*"}),(0,D.jsx)(d.xv,{children:"Product Description"})]}),(0,D.jsx)(m.g,{id:"productDescription",placeholder:"Here is a sample placeholder",size:"sm",resize:"vertical",maxHeight:"18rem",width:"70%",value:W.productDescription,onChange:function(e){return J((0,s.Z)((0,s.Z)({},W),{},{productDescription:e.currentTarget.value}))}})]})]})]}),(0,D.jsxs)(d.kC,{flexDirection:"column",p:8,my:8,backgroundColor:"whiteAlpha.800",children:[(0,D.jsx)(d.X6,{mb:8,noOfLines:1,children:"Sales Information"}),(0,D.jsxs)(d.gC,{justifyContent:"center",alignItems:"center",spacing:8,children:[V?(0,D.jsx)(C.Z,{setVariation:q,vgInput:A,setVgInput:B,vtList:X,setVtList:F}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(d.kC,{flexDirection:"row",justifyContent:"space-between",width:"70%",children:[(0,D.jsx)(d.xv,{children:"Variations"}),(0,D.jsx)(h.zx,{width:"70%",variant:"outline",onClick:function(){return q(!0)},children:"+ Enable Variations"})]}),(0,D.jsxs)(d.kC,{flexDirection:"row",justifyContent:"space-between",width:"70%",children:[(0,D.jsxs)(d.kC,{children:[(0,D.jsx)(d.xv,{textColor:"tomato",children:"*"}),(0,D.jsx)(d.xv,{children:"Price"})]}),(0,D.jsxs)(x.BZ,{width:"70%",children:[(0,D.jsx)(x.Ui,{children:"Rp"}),(0,D.jsx)(x.II,{id:"defaultPrice",min:0,width:"100%",type:"number",placeholder:"Input",value:W.defaultPrice,onChange:we})]})]}),(0,D.jsxs)(d.kC,{flexDirection:"row",justifyContent:"space-between",width:"70%",children:[(0,D.jsxs)(d.kC,{children:[(0,D.jsx)(d.xv,{textColor:"tomato",children:"*"}),(0,D.jsx)(d.xv,{children:"Stock"})]}),(0,D.jsx)(x.II,{id:"defaultStock",min:0,width:"70%",type:"number",placeholder:"Input",value:W.defaultStock,onChange:we})]})]}),(0,D.jsxs)(d.kC,{flexDirection:"row",justifyContent:"space-between",width:"70%",children:[(0,D.jsxs)(d.kC,{children:[(0,D.jsx)(d.xv,{textColor:"tomato",children:"*"}),(0,D.jsx)(d.xv,{children:"Minimum Buy Qty"})]}),(0,D.jsx)(x.II,{id:"minQty",width:"70%",type:"number",min:1,placeholder:"Input",value:W.minQty,onChange:we})]}),(0,D.jsxs)(d.kC,{flexDirection:"row",justifyContent:"space-between",width:"70%",children:[(0,D.jsx)(d.kC,{children:(0,D.jsx)(d.xv,{children:"Maximum Buy Qty"})}),(0,D.jsx)(x.II,{id:"maxQty",width:"70%",type:"number",min:1,placeholder:"Input",value:W.maxQty,onChange:we})]})]})]}),(0,D.jsxs)(d.kC,{flexDirection:"column",p:8,my:8,backgroundColor:"whiteAlpha.800",children:[(0,D.jsx)(d.X6,{mb:8,noOfLines:1,children:"Shipping"}),(0,D.jsxs)(d.gC,{justifyContent:"center",alignItems:"center",spacing:8,children:[(0,D.jsxs)(d.kC,{flexDirection:"row",justifyContent:"space-between",width:"70%",children:[(0,D.jsxs)(d.kC,{children:[(0,D.jsx)(d.xv,{textColor:"tomato",children:"*"}),(0,D.jsx)(d.xv,{children:"Weight"})]}),(0,D.jsxs)(x.BZ,{width:"70%",children:[(0,D.jsx)(x.II,{id:"weight",min:0,width:"100%",placeholder:"Input",type:"number",value:W.weight,onChange:we}),(0,D.jsx)(x.xW,{children:"gr"})]})]}),(0,D.jsxs)(d.kC,{flexDirection:"row",justifyContent:"space-between",width:"70%",children:[(0,D.jsx)(d.xv,{children:"Dangerous Goods"}),(0,D.jsx)(p.Ee,{width:"70%",value:W.dangerousGoods,onChange:function(e){return J((0,s.Z)((0,s.Z)({},W),{},{dangerousGoods:e}))},children:(0,D.jsxs)(d.Kq,{direction:"row",spacing:10,width:"100%",children:[(0,D.jsx)(p.Y8,{value:"false",children:"No"}),(0,D.jsx)(p.Y8,{value:"true",children:"Contains battery, magnet, liquid, or flammable materials"})]})})]})]})]}),(0,D.jsxs)(d.kC,{flexDirection:"column",p:8,my:8,backgroundColor:"whiteAlpha.800",children:[(0,D.jsx)(d.X6,{mb:8,noOfLines:1,children:"Others"}),(0,D.jsxs)(d.gC,{justifyContent:"center",alignItems:"center",spacing:8,children:[(0,D.jsxs)(d.kC,{flexDirection:"row",justifyContent:"space-between",width:"70%",children:[(0,D.jsx)(d.xv,{children:"Condition"}),(0,D.jsxs)(w.Ph,{width:"70%",value:W.condition,onChange:function(e){return J((0,s.Z)((0,s.Z)({},W),{},{condition:e.currentTarget.value}))},children:[(0,D.jsx)("option",{value:"New",children:"New"}),(0,D.jsx)("option",{value:"Used",children:"Used"})]})]}),(0,D.jsxs)(d.kC,{flexDirection:"row",justifyContent:"space-between",width:"70%",children:[(0,D.jsx)(d.xv,{children:"SKU"}),(0,D.jsx)(x.II,{id:"SKU",placeholder:"Input",width:"70%",value:W.SKU,onChange:we})]})]})]}),(0,D.jsxs)(d.kC,{flexDirection:"row-reverse",p:8,my:8,gap:4,children:[(0,D.jsx)(h.zx,{width:"11em",variant:"solid",colorScheme:"green",onClick:je,disabled:te,children:"Save and Publish"}),(0,D.jsx)(h.zx,{width:"11em",variant:"outline",bgColor:"white",onClick:function(){return he(I.Z.SELLER_PRODUCT)},disabled:te,children:"Cancel"})]}),(0,D.jsx)(v.Z,{isOpen:le,onClose:ue,categories:re,selectedCategory:O,setSelectedCategory:Q})]})}}}]);
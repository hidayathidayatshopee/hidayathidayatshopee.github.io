"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1757],{1757:function(t,n,e){e.r(n);var r=e(37762),o=e(74165),a=e(15861),i=e(29439),u=e(10658),s=e.n(u),c=e(47313),d=e(58467),f=e(73253),l=e(85881),p=e(45598),v=e(43974),m=e(86594),h=e(46417);n.default=function(){var t,n,e=(0,p.Z)(),u=e.successToast,Z=e.errorToast,x=(0,d.UO)().id,_=(0,d.s0)(),P=(0,c.useState)([]),b=(0,i.Z)(P,2),k=b[0],Y=b[1],O=(0,f.Z)().fetchProduct,T=(0,l.Z)(),w=T.fetchShopPromotion,D=T.addShopPromotion,L=T.convertVariantProductToProductForm,M=T.addProductVariationFormNotActive,S=T.isLoading,g=T.shopPromotion,y=function(){var t=(0,a.Z)((0,o.Z)().mark((function t(n){var e;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D(n);case 2:(e=t.sent).is_success?(u(e.message),_(v.Z.SELLER_PROMOTION)):Z(e.message);case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),E=function(){var t=(0,a.Z)((0,o.Z)().mark((function t(n){var e,a,i,u,s;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],a=(0,r.Z)(n),t.prev=2,a.s();case 4:if((i=a.n()).done){t.next=12;break}return u=i.value,t.next=8,O(u.id);case 8:null!==(s=t.sent)&&e.push(s);case 10:t.next=4;break;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),a.e(t.t0);case 17:return t.prev=17,a.f(),t.finish(17);case 20:return t.abrupt("return",e);case 21:case"end":return t.stop()}}),t,null,[[2,14,17,20]])})));return function(n){return t.apply(this,arguments)}}();return(0,c.useEffect)((function(){w(Number(x)).then((function(t){!function(t){var n=L(t);E(n).then((function(t){var e=M(n,t);Y(e)}))}(t.data.shop_promotion_products)}))}),[]),(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(m.Z,{id:null!==(t=null===g||void 0===g?void 0:g.id)&&void 0!==t?t:0,name:null!==(n=null===g||void 0===g?void 0:g.name)&&void 0!==n?n:"",start_date:null!==g&&void 0!==g&&g.start_date?s()(null===g||void 0===g?void 0:g.start_date).format("YYYY-MM-DDTHH:mm"):"",expiry_date:null!==g&&void 0!==g&&g.expiry_date?s()(null===g||void 0===g?void 0:g.expiry_date).format("YYYY-MM-DDTHH:mm"):"",product:k,isDisabled:!1,isLoading:S,onCancel:function(){_(v.Z.SELLER_PROMOTION)},onSubmit:function(t){y(t)},title:"Duplicate Promotion"})})}}}]);
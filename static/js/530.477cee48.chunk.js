"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[530],{9959:function(n,e,t){t.d(e,{Z:function(){return v}});var r=t(4165),o=t(5861),a=t(9439),i=t(2791),u=t(9396),c=t(2914),s=function(){var n=(0,o.Z)((0,r.Z)().mark((function n(e,t,o){var a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.Z.get(c.v.shop.SHOPS_PROMOTION+"?status=".concat(e,"&page=").concat(t,"&limit=").concat(o));case 3:return a=n.sent,n.abrupt("return",a.data);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,t,r){return n.apply(this,arguments)}}(),l=function(){var n=(0,o.Z)((0,r.Z)().mark((function n(e){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.Z.get(c.v.shop.SHOPS_PROMOTION+"/".concat(e));case 3:return t=n.sent,n.abrupt("return",t.data);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}(),d=function(){var n=(0,o.Z)((0,r.Z)().mark((function n(e){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.Z.post(c.v.shop.SHOPS_PROMOTION,e);case 3:return t=n.sent,n.abrupt("return",t.data);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}(),p=function(){var n=(0,o.Z)((0,r.Z)().mark((function n(e){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u.Z.put(c.v.shop.SHOPS_PROMOTION+"/".concat(e.id),e);case 3:return t=n.sent,n.abrupt("return",t.data);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}(),f={getAllShopPromotions:s,getShopPromotion:l,postShopPromotion:d,putShopPromotion:p},v=function(){var n=(0,i.useState)(!1),e=(0,a.Z)(n,2),t=e[0],u=e[1],c=(0,i.useState)(),s=(0,a.Z)(c,2),l=s[0],d=s[1],p=(0,i.useState)(),v=(0,a.Z)(p,2),h=v[0],x=v[1],m=function(){var n=(0,o.Z)((0,r.Z)().mark((function n(e,t,o){var a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u(!0),n.next=3,f.getAllShopPromotions(e,t,o);case 3:return a=n.sent,u(!1),a.is_success&&x(a.data),n.abrupt("return",a);case 7:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}(),b=function(){var n=(0,o.Z)((0,r.Z)().mark((function n(e){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u(!0),n.next=3,f.getShopPromotion(e);case 3:return t=n.sent,u(!1),t.is_success&&d(t.data),n.abrupt("return",t);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),g=function(){var n=(0,o.Z)((0,r.Z)().mark((function n(e){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u(!0),n.next=3,f.postShopPromotion(e);case 3:return t=n.sent,u(!1),n.abrupt("return",t);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),j=function(){var n=(0,o.Z)((0,r.Z)().mark((function n(e){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u(!0),n.next=3,f.putShopPromotion(e);case 3:return t=n.sent,u(!1),n.abrupt("return",t);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return{fetchAllShopPromotions:m,fetchShopPromotion:b,addShopPromotion:g,updateShopPromotion:j,convertVariantProductToProductForm:function(n){var e=[];return n.filter((function(e,t){return t===n.findIndex((function(n){return e.product_id===n.product_id}))})).forEach((function(t,r){e[r]={id:t.product_id,name:t.product_name,in_form:!0,variants:[]},n.forEach((function(n){n.product_id===t.product_id&&e[r].variants.push({benefit:n.benefit,benefit_percentage:n.benefit_percentage,is_active:!0,quota:n.quota,variant_type_id:n.variant_type_id,variant_name:n.variant_type_name,max_buy_qty:n.max_buy_qty})}))})),e},addProductVariationFormNotActive:function(n,e){var t=[];return n.forEach((function(n,r){t[r]=n,e.forEach((function(e){var o;e.id===n.id&&(null===(o=e.variant_group)||void 0===o||o.variant_types.forEach((function(e){var o=!1;n.variants.forEach((function(n){e.id!==n.variant_type_id||(o=!0)})),o||t[r].variants.push({benefit:0,benefit_percentage:0,is_active:!1,max_buy_qty:0,quota:0,variant_name:e.name,variant_type_id:e.id})})))}))})),t},isLoading:t,shopPromotions:h,shopPromotion:l}}},5166:function(n,e,t){t.r(e),t.d(e,{default:function(){return j}});var r=t(3635),o=t(9712),a=t(5777),i=t(8678),u=t(9126),c=t(1087),s=t(8802),l=t(1089),d=t(9194),p=t(5135),f=t(7892),v=t.n(f),h=t(2791),x=t(7689),m=t(9959),b=t(184);var g=function(n){var e,t,r,i=(0,x.s0)(),c=(0,m.Z)(),f=c.shopPromotions,g=c.isLoading,j=c.fetchAllShopPromotions,_=function(n,e){return v()().isAfter(v()(n))&&v()().isBefore(v()(e))},k=function(n,e){return v()().isBefore(v()(n))&&v()().isBefore(v()(e))};return(0,h.useEffect)((function(){j(n.status,1,10)}),[]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.xJ,{children:(0,b.jsxs)(l.iA,{variant:"striped",children:[(0,b.jsx)(l.hr,{children:(0,b.jsxs)(l.Tr,{children:[(0,b.jsx)(l.Th,{children:"Name"}),(0,b.jsx)(l.Th,{children:"Start"}),(0,b.jsx)(l.Th,{children:"End"}),(0,b.jsx)(l.Th,{textAlign:"center",children:"Action"})]})}),(0,b.jsxs)(l.p3,{children:[g?(0,b.jsx)(l.Tr,{children:(0,b.jsx)(l.Td,{colSpan:6,textAlign:"center",children:(0,b.jsx)(d.$,{})})}):null,g||0!==(null===f||void 0===f?void 0:f.data.length)?null:(0,b.jsx)(l.Tr,{children:(0,b.jsx)(l.Td,{colSpan:4,textAlign:"center",children:"Empty Data"})}),!g&&(null===f||void 0===f?void 0:f.data.map((function(n,e){return(0,b.jsxs)(l.Tr,{children:[(0,b.jsx)(l.Td,{children:n.name}),(0,b.jsx)(l.Td,{children:v()(n.start_date).format("YYYY-MM-DD hh:mmA")}),(0,b.jsx)(l.Td,{children:v()(n.expiry_date).format("YYYY-MM-DD hh:mmA")}),(0,b.jsxs)(l.Td,{textAlign:"center",children:[(t=n.start_date,r=n.expiry_date,v()().isAfter(v()(t))&&v()().isAfter(v()(r))?(0,b.jsx)(p.u,{hasArrow:!0,label:"Detail",bg:"gray.300",color:"black",children:(0,b.jsx)(a.hU,{mx:1,"aria-label":"Detail",bgColor:"blue.300",icon:(0,b.jsx)(u.rCC,{}),onClick:function(){i(s.Z.SELLER_PROMOTION_DETAIL(n.id))}})}):null),_(n.start_date,n.expiry_date)||k(n.start_date,n.expiry_date)?(0,b.jsx)(p.u,{hasArrow:!0,label:"Edit",bg:"gray.300",color:"black",children:(0,b.jsx)(a.hU,{mx:1,"aria-label":"Edit",bgColor:"yellow.300",icon:(0,b.jsx)(u.jox,{}),onClick:function(){i(s.Z.SELLER_PROMOTION_EDIT(n.id))}})}):null,(0,b.jsx)(p.u,{hasArrow:!0,label:"Duplicate",bg:"gray.300",color:"black",children:(0,b.jsx)(a.hU,{mx:1,"aria-label":"Duplicate",bgColor:"green.400",icon:(0,b.jsx)(u.rEd,{}),onClick:function(){i(s.Z.SELLER_PROMOTION_DUPLICATE(n.id))}})})]})]},e);var t,r})))]})]})}),(0,b.jsxs)(o.kC,{pt:"5",justifyContent:"space-between",children:[(0,b.jsxs)(o.xv,{children:["Total ",null===f||void 0===f?void 0:f.total]}),(0,b.jsxs)(o.kC,{alignItems:"center",children:[(0,b.jsx)(a.zx,{isDisabled:(null!==(e=null===f||void 0===f?void 0:f.current_page)&&void 0!==e?e:0)<=1,fontWeight:"normal",onClick:function(){!function(){var e,t=(null!==(e=null===f||void 0===f?void 0:f.current_page)&&void 0!==e?e:0)-1;j(n.status,t,10)}()},children:"Prev"}),(0,b.jsxs)(o.xv,{px:3,children:[null===f||void 0===f?void 0:f.current_page," of ",null===f||void 0===f?void 0:f.total_page]}),(0,b.jsx)(a.zx,{isDisabled:(null!==(t=null===f||void 0===f?void 0:f.current_page)&&void 0!==t?t:0)>=(null!==(r=null===f||void 0===f?void 0:f.total_page)&&void 0!==r?r:0),fontWeight:"normal",onClick:function(){!function(){var e,t=(null!==(e=null===f||void 0===f?void 0:f.current_page)&&void 0!==e?e:0)+1;j(n.status,t,10)}()},children:"Next"})]})]})]})};var j=function(){return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(r.Zb,{variant:"outline",rounded:"xl",p:5,bgColor:"white",children:[(0,b.jsx)(r.Ol,{children:(0,b.jsxs)(o.kC,{justifyContent:"space-between",children:[(0,b.jsx)(o.xv,{fontSize:"2xl",fontWeight:"bold",children:"Promotion List"}),(0,b.jsx)(a.zx,{leftIcon:(0,b.jsx)(u.AzW,{}),as:c.rU,to:s.Z.SELLER_PROMOTION_CREATE,children:"Create Promotion"})]})}),(0,b.jsx)(r.eW,{children:(0,b.jsxs)(i.mQ,{variant:"enclosed",children:[(0,b.jsxs)(i.td,{children:[(0,b.jsx)(i.OK,{children:"All"}),(0,b.jsx)(i.OK,{children:"Ongoing"}),(0,b.jsx)(i.OK,{children:"Upcoming"}),(0,b.jsx)(i.OK,{children:"Has ended"})]}),(0,b.jsxs)(i.nP,{children:[(0,b.jsx)(i.x4,{paddingX:0,children:(0,b.jsx)(g,{status:"all"})}),(0,b.jsx)(i.x4,{paddingX:0,children:(0,b.jsx)(g,{status:"ongoing"})}),(0,b.jsx)(i.x4,{paddingX:0,children:(0,b.jsx)(g,{status:"upcoming"})}),(0,b.jsx)(i.x4,{paddingX:0,children:(0,b.jsx)(g,{status:"ended"})})]})]})})]})})}},5436:function(n,e,t){t.d(e,{h:function(){return p}});var r=t(1413),o=t(9439),a=t(5987),i=t(1507),u=t(2791),c=["ref","isDisabled","isFocusable","clickOnEnter","clickOnSpace","onMouseDown","onMouseUp","onClick","onKeyDown","onKeyUp","tabIndex","onMouseOver","onMouseLeave"],s=function(n){return n?"":void 0};function l(){var n=(0,u.useRef)(new Map),e=n.current,t=(0,u.useCallback)((function(e,t,r,o){n.current.set(r,{type:t,el:e,options:o}),e.addEventListener(t,r,o)}),[]),r=(0,u.useCallback)((function(e,t,r,o){e.removeEventListener(t,r,o),n.current.delete(r)}),[]);return(0,u.useEffect)((function(){return function(){e.forEach((function(n,e){r(n.el,n.type,e,n.options)}))}}),[r,e]),{add:t,remove:r}}function d(n){var e=n.target,t=e.tagName,r=e.isContentEditable;return"INPUT"!==t&&"TEXTAREA"!==t&&!0!==r}function p(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.ref,t=n.isDisabled,p=n.isFocusable,f=n.clickOnEnter,v=void 0===f||f,h=n.clickOnSpace,x=void 0===h||h,m=n.onMouseDown,b=n.onMouseUp,g=n.onClick,j=n.onKeyDown,_=n.onKeyUp,k=n.tabIndex,y=n.onMouseOver,Z=n.onMouseLeave,O=(0,a.Z)(n,c),P=(0,u.useState)(!0),C=(0,o.Z)(P,2),E=C[0],S=C[1],T=(0,u.useState)(!1),w=(0,o.Z)(T,2),D=w[0],M=w[1],A=l(),L=function(n){n&&"BUTTON"!==n.tagName&&S(!1)},I=E?k:k||0,U=t&&!p,N=(0,u.useCallback)((function(n){if(t)return n.stopPropagation(),void n.preventDefault();n.currentTarget.focus(),null==g||g(n)}),[t,g]),R=(0,u.useCallback)((function(n){D&&d(n)&&(n.preventDefault(),n.stopPropagation(),M(!1),A.remove(document,"keyup",R,!1))}),[D,A]),K=(0,u.useCallback)((function(n){if(null==j||j(n),!(t||n.defaultPrevented||n.metaKey)&&d(n.nativeEvent)&&!E){var e=v&&"Enter"===n.key;if(x&&" "===n.key&&(n.preventDefault(),M(!0)),e)n.preventDefault(),n.currentTarget.click();A.add(document,"keyup",R,!1)}}),[t,E,j,v,x,A,R]),Y=(0,u.useCallback)((function(n){(null==_||_(n),t||n.defaultPrevented||n.metaKey)||d(n.nativeEvent)&&!E&&x&&" "===n.key&&(n.preventDefault(),M(!1),n.currentTarget.click())}),[x,E,t,_]),q=(0,u.useCallback)((function(n){0===n.button&&(M(!1),A.remove(document,"mouseup",q,!1))}),[A]),F=(0,u.useCallback)((function(n){if(0===n.button){if(t)return n.stopPropagation(),void n.preventDefault();E||M(!0),n.currentTarget.focus({preventScroll:!0}),A.add(document,"mouseup",q,!1),null==m||m(n)}}),[t,E,m,A,q]),z=(0,u.useCallback)((function(n){0===n.button&&(E||M(!1),null==b||b(n))}),[b,E]),H=(0,u.useCallback)((function(n){t?n.preventDefault():null==y||y(n)}),[t,y]),W=(0,u.useCallback)((function(n){D&&(n.preventDefault(),M(!1)),null==Z||Z(n)}),[D,Z]),X=(0,i.lq)(e,L);return E?(0,r.Z)((0,r.Z)({},O),{},{ref:X,type:"button","aria-disabled":U?void 0:t,disabled:U,onClick:N,onMouseDown:m,onMouseUp:b,onKeyUp:_,onKeyDown:j,onMouseOver:y,onMouseLeave:Z}):(0,r.Z)((0,r.Z)({},O),{},{ref:X,role:"button","data-active":s(D),"aria-disabled":t?"true":void 0,tabIndex:U?void 0:I,onClick:N,onMouseDown:F,onMouseUp:z,onKeyUp:Y,onKeyDown:K,onMouseOver:H,onMouseLeave:W})}}}]);
//# sourceMappingURL=530.477cee48.chunk.js.map
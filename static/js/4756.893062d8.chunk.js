"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[4756],{85881:function(n,e,r){r.d(e,{Z:function(){return v}});var t=r(74165),o=r(15861),i=r(29439),a=r(47313),c=r(47670),s=r(30464),u=function(){var n=(0,o.Z)((0,t.Z)().mark((function n(e,r,o){var i;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c.Z.get(s.v.shop.SHOPS_PROMOTION+"?status=".concat(e,"&page=").concat(r,"&limit=").concat(o));case 3:return i=n.sent,n.abrupt("return",i.data);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,r,t){return n.apply(this,arguments)}}(),l=function(){var n=(0,o.Z)((0,t.Z)().mark((function n(e){var r;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c.Z.get(s.v.shop.SHOPS_PROMOTION+"/".concat(e));case 3:return r=n.sent,n.abrupt("return",r.data);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}(),d=function(){var n=(0,o.Z)((0,t.Z)().mark((function n(e){var r;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c.Z.post(s.v.shop.SHOPS_PROMOTION,e);case 3:return r=n.sent,n.abrupt("return",r.data);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}(),p=function(){var n=(0,o.Z)((0,t.Z)().mark((function n(e){var r;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c.Z.put(s.v.shop.SHOPS_PROMOTION+"/".concat(e.id),e);case 3:return r=n.sent,n.abrupt("return",r.data);case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}(),f={getAllShopPromotions:u,getShopPromotion:l,postShopPromotion:d,putShopPromotion:p},v=function(){var n=(0,a.useState)(!1),e=(0,i.Z)(n,2),r=e[0],c=e[1],s=(0,a.useState)(),u=(0,i.Z)(s,2),l=u[0],d=u[1],p=(0,a.useState)(),v=(0,i.Z)(p,2),h=v[0],x=v[1],g=function(){var n=(0,o.Z)((0,t.Z)().mark((function n(e,r,o){var i;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c(!0),n.next=3,f.getAllShopPromotions(e,r,o);case 3:return i=n.sent,c(!1),i.is_success&&x(i.data),n.abrupt("return",i);case 7:case"end":return n.stop()}}),n)})));return function(e,r,t){return n.apply(this,arguments)}}(),m=function(){var n=(0,o.Z)((0,t.Z)().mark((function n(e){var r;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c(!0),n.next=3,f.getShopPromotion(e);case 3:return r=n.sent,c(!1),r.is_success&&d(r.data),n.abrupt("return",r);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),b=function(){var n=(0,o.Z)((0,t.Z)().mark((function n(e){var r;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c(!0),n.next=3,f.postShopPromotion(e);case 3:return r=n.sent,c(!1),n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),_=function(){var n=(0,o.Z)((0,t.Z)().mark((function n(e){var r;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c(!0),n.next=3,f.putShopPromotion(e);case 3:return r=n.sent,c(!1),n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return{fetchAllShopPromotions:g,fetchShopPromotion:m,addShopPromotion:b,updateShopPromotion:_,convertVariantProductToProductForm:function(n){var e=[];return n.filter((function(e,r){return r===n.findIndex((function(n){return e.product_id===n.product_id}))})).forEach((function(r,t){e[t]={id:r.product_id,name:r.product_name,in_form:!0,variants:[]},n.forEach((function(n){n.product_id===r.product_id&&e[t].variants.push({price:0,benefit:n.benefit,benefit_percentage:n.benefit_percentage,is_active:!0,quota:n.quota,variant_type_id:n.variant_type_id,variant_name:n.variant_type_name,max_buy_qty:n.max_buy_qty})}))})),e},addProductVariationFormNotActive:function(n,e){var r=[];return n.forEach((function(n,t){r[t]=n,e.forEach((function(e){var o;e.id===n.id&&(null===(o=e.variant_group)||void 0===o||o.variant_types.forEach((function(e){var o=!1;n.variants.forEach((function(n,i){if(e.id===n.variant_type_id)return r[t].variants[i].price=e.price,void(o=!0)})),o||r[t].variants.push({price:e.price,benefit:0,benefit_percentage:0,is_active:!1,max_buy_qty:0,quota:0,variant_name:e.name,variant_type_id:e.id})})))}))})),r},isLoading:r,shopPromotions:h,shopPromotion:l}}},84756:function(n,e,r){r.r(e),r.d(e,{default:function(){return _}});var t=r(62128),o=r(43964),i=r(69748),a=r(63714),c=r(58821),s=r(2135),u=r(43974),l=r(30955),d=r(91101),p=r(32768),f=r(10658),v=r.n(f),h=r(47313),x=r(58467),g=r(85881),m=r(46417);var b=function(n){var e,r,t,a=(0,x.s0)(),s=(0,g.Z)(),f=s.shopPromotions,b=s.isLoading,_=s.fetchAllShopPromotions,O=function(n,e){return v()().isAfter(v()(n))&&v()().isBefore(v()(e))},j=function(n,e){return v()().isBefore(v()(n))&&v()().isBefore(v()(e))};return(0,h.useEffect)((function(){_(n.status,1,10)}),[]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(l.xJ,{children:(0,m.jsxs)(l.iA,{variant:"striped",children:[(0,m.jsx)(l.hr,{children:(0,m.jsxs)(l.Tr,{children:[(0,m.jsx)(l.Th,{children:"Name"}),(0,m.jsx)(l.Th,{children:"Start"}),(0,m.jsx)(l.Th,{children:"End"}),(0,m.jsx)(l.Th,{textAlign:"center",children:"Action"})]})}),(0,m.jsxs)(l.p3,{children:[b?(0,m.jsx)(l.Tr,{children:(0,m.jsx)(l.Td,{colSpan:6,textAlign:"center",children:(0,m.jsx)(d.$,{})})}):null,b||0!==(null===f||void 0===f?void 0:f.data.length)?null:(0,m.jsx)(l.Tr,{children:(0,m.jsx)(l.Td,{colSpan:4,textAlign:"center",children:"Empty Data"})}),!b&&(null===f||void 0===f?void 0:f.data.map((function(n,e){return(0,m.jsxs)(l.Tr,{children:[(0,m.jsx)(l.Td,{children:n.name}),(0,m.jsx)(l.Td,{children:v()(n.start_date).format("YYYY-MM-DD hh:mmA")}),(0,m.jsx)(l.Td,{children:v()(n.expiry_date).format("YYYY-MM-DD hh:mmA")}),(0,m.jsxs)(l.Td,{textAlign:"center",children:[(r=n.start_date,t=n.expiry_date,v()().isAfter(v()(r))&&v()().isAfter(v()(t))?(0,m.jsx)(p.u,{hasArrow:!0,label:"Detail",bg:"gray.300",color:"black",children:(0,m.jsx)(i.hU,{mx:1,"aria-label":"Detail",bgColor:"blue.300",icon:(0,m.jsx)(c.rCC,{}),onClick:function(){a(u.Z.SELLER_PROMOTION_DETAIL(n.id))}})}):null),O(n.start_date,n.expiry_date)||j(n.start_date,n.expiry_date)?(0,m.jsx)(p.u,{hasArrow:!0,label:"Edit",bg:"gray.300",color:"black",children:(0,m.jsx)(i.hU,{mx:1,"aria-label":"Edit",bgColor:"yellow.300",icon:(0,m.jsx)(c.jox,{}),onClick:function(){a(u.Z.SELLER_PROMOTION_EDIT(n.id))}})}):null,(0,m.jsx)(p.u,{hasArrow:!0,label:"Duplicate",bg:"gray.300",color:"black",children:(0,m.jsx)(i.hU,{mx:1,"aria-label":"Duplicate",bgColor:"green.400",icon:(0,m.jsx)(c.rEd,{}),onClick:function(){a(u.Z.SELLER_PROMOTION_DUPLICATE(n.id))}})})]})]},e);var r,t})))]})]})}),(0,m.jsxs)(o.kC,{pt:"5",justifyContent:"space-between",children:[(0,m.jsxs)(o.xv,{children:["Total ",null===f||void 0===f?void 0:f.total]}),(0,m.jsxs)(o.kC,{alignItems:"center",children:[(0,m.jsx)(i.zx,{isDisabled:(null!==(e=null===f||void 0===f?void 0:f.current_page)&&void 0!==e?e:0)<=1,fontWeight:"normal",onClick:function(){!function(){var e,r=(null!==(e=null===f||void 0===f?void 0:f.current_page)&&void 0!==e?e:0)-1;_(n.status,r,10)}()},children:"Prev"}),(0,m.jsxs)(o.xv,{px:3,children:[null===f||void 0===f?void 0:f.current_page," of ",null===f||void 0===f?void 0:f.total_page]}),(0,m.jsx)(i.zx,{isDisabled:(null!==(r=null===f||void 0===f?void 0:f.current_page)&&void 0!==r?r:0)>=(null!==(t=null===f||void 0===f?void 0:f.total_page)&&void 0!==t?t:0),fontWeight:"normal",onClick:function(){!function(){var e,r=(null!==(e=null===f||void 0===f?void 0:f.current_page)&&void 0!==e?e:0)+1;_(n.status,r,10)}()},children:"Next"})]})]})]})};var _=function(){return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(t.Zb,{variant:"outline",rounded:"xl",p:5,bgColor:"white",children:[(0,m.jsx)(t.Ol,{children:(0,m.jsxs)(o.kC,{justifyContent:"space-between",children:[(0,m.jsx)(o.xv,{fontSize:"2xl",fontWeight:"bold",children:"Promotion List"}),(0,m.jsx)(i.zx,{leftIcon:(0,m.jsx)(c.AzW,{}),as:s.rU,to:u.Z.SELLER_PROMOTION_CREATE,children:"Create Promotion"})]})}),(0,m.jsx)(t.eW,{children:(0,m.jsxs)(a.mQ,{variant:"enclosed",isLazy:!0,children:[(0,m.jsxs)(a.td,{children:[(0,m.jsx)(a.OK,{children:"All"}),(0,m.jsx)(a.OK,{children:"Ongoing"}),(0,m.jsx)(a.OK,{children:"Upcoming"}),(0,m.jsx)(a.OK,{children:"Has ended"})]}),(0,m.jsxs)(a.nP,{children:[(0,m.jsx)(a.x4,{paddingX:0,children:(0,m.jsx)(b,{status:"all"})}),(0,m.jsx)(a.x4,{paddingX:0,children:(0,m.jsx)(b,{status:"ongoing"})}),(0,m.jsx)(a.x4,{paddingX:0,children:(0,m.jsx)(b,{status:"upcoming"})}),(0,m.jsx)(a.x4,{paddingX:0,children:(0,m.jsx)(b,{status:"ended"})})]})]})})]})})}},32768:function(n,e,r){r.d(e,{u:function(){return y}});var t=r(4942),o=r(1413),i=r(45987),a=r(37762),c=r(47313),s=r(25763),u=r(88276),l=r(31201),d=r(14988),p=r(43905),f=r(82280),v=r(40073),h=r(34490),x=r(24401),g=["openDelay","closeDelay","closeOnClick","closeOnMouseDown","closeOnScroll","closeOnPointerDown","closeOnEsc","onOpen","onClose","placement","id","isOpen","defaultIsOpen","arrowSize","arrowShadowColor","arrowPadding","modifiers","isDisabled","gutter","offset","direction"],m=["children","label","shouldWrapChildren","aria-label","hasArrow","bg","portalProps","background","backgroundColor","bgColor","motionProps"];var b={exit:{scale:.85,opacity:0,transition:{opacity:{duration:.15,easings:"easeInOut"},scale:{duration:.2,easings:"easeInOut"}}},enter:{scale:1,opacity:1,transition:{opacity:{easings:"easeOut",duration:.2},scale:{duration:.2,ease:[.175,.885,.4,1.1]}}}};function _(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return function(n){e.some((function(e){return null==e||e(n),null==n?void 0:n.defaultPrevented}))}}var O=function(n){var e;return(null==(e=n.current)?void 0:e.ownerDocument)||document},j=function(n){var e,r;return(null==(r=null==(e=n.current)?void 0:e.ownerDocument)?void 0:r.defaultView)||window};var P="chakra-ui:close-tooltip";function Z(n,e){return(0,c.useEffect)((function(){var r=O(n);return r.addEventListener(P,e),function(){return r.removeEventListener(P,e)}}),[e,n]),function(){var e=O(n),r=j(n);e.dispatchEvent(new r.CustomEvent(P))}}var w=(0,l.m$)(p.E.div),y=(0,l.Gp)((function(n,e){var r,p,P=(0,l.mq)("Tooltip",n),y=(0,d.Lr)(n),C=(0,l.Fg)(),E=y.children,k=y.label,T=y.shouldWrapChildren,S=y["aria-label"],A=y.hasArrow,D=y.bg,I=y.portalProps,R=y.background,L=y.backgroundColor,M=y.bgColor,N=y.motionProps,z=(0,i.Z)(y,m),q=null!==(r=null!==(p=null!==R&&void 0!==R?R:L)&&void 0!==p?p:D)&&void 0!==r?r:M;if(q){P.bg=q;var F=(0,d.K1)(C,"colors",q);P[s.j.arrowBg.var]=F}var Y,W=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=n.openDelay,r=void 0===e?0:e,a=n.closeDelay,u=void 0===a?0:a,l=n.closeOnClick,d=void 0===l||l,p=n.closeOnMouseDown,f=n.closeOnScroll,m=n.closeOnPointerDown,b=void 0===m?p:m,P=n.closeOnEsc,w=void 0===P||P,y=n.onOpen,C=n.onClose,E=n.placement,k=n.id,T=n.isOpen,S=n.defaultIsOpen,A=n.arrowSize,D=void 0===A?10:A,I=n.arrowShadowColor,R=n.arrowPadding,L=n.modifiers,M=n.isDisabled,N=n.gutter,z=n.offset,q=n.direction,F=(0,i.Z)(n,g),Y=(0,h.q)({isOpen:T,defaultIsOpen:S,onOpen:y,onClose:C}),W=Y.isOpen,$=Y.onOpen,B=Y.onClose,U=(0,s.D)({enabled:W,placement:E,arrowPadding:R,modifiers:L,gutter:N,offset:z,direction:q}),H=U.referenceRef,K=U.getPopperProps,X=U.getArrowInnerProps,V=U.getArrowProps,G=(0,c.useId)(),J="tooltip-".concat(null!==k&&void 0!==k?k:G),Q=(0,c.useRef)(null),nn=(0,c.useRef)(),en=(0,c.useCallback)((function(){nn.current&&(clearTimeout(nn.current),nn.current=void 0)}),[]),rn=(0,c.useRef)(),tn=(0,c.useCallback)((function(){rn.current&&(clearTimeout(rn.current),rn.current=void 0)}),[]),on=(0,c.useCallback)((function(){tn(),B()}),[B,tn]),an=Z(Q,on),cn=(0,c.useCallback)((function(){if(!M&&!nn.current){an();var n=j(Q);nn.current=n.setTimeout($,r)}}),[an,M,$,r]),sn=(0,c.useCallback)((function(){en();var n=j(Q);rn.current=n.setTimeout(on,u)}),[u,on,en]),un=(0,c.useCallback)((function(){W&&d&&sn()}),[d,sn,W]),ln=(0,c.useCallback)((function(){W&&b&&sn()}),[b,sn,W]),dn=(0,c.useCallback)((function(n){W&&"Escape"===n.key&&sn()}),[W,sn]);(0,v.O)((function(){return O(Q)}),"keydown",w?dn:void 0),(0,v.O)((function(){return O(Q)}),"scroll",(function(){W&&f&&on()})),(0,c.useEffect)((function(){M&&(en(),W&&B())}),[M,W,B,en]),(0,c.useEffect)((function(){return function(){en(),tn()}}),[en,tn]),(0,v.O)((function(){return Q.current}),"pointerleave",sn);var pn=(0,c.useCallback)((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,o.Z)((0,o.Z)({},n),{},{ref:(0,x.lq)(Q,e,H),onPointerEnter:_(n.onPointerEnter,(function(n){"touch"!==n.pointerType&&cn()})),onClick:_(n.onClick,un),onPointerDown:_(n.onPointerDown,ln),onFocus:_(n.onFocus,cn),onBlur:_(n.onBlur,sn),"aria-describedby":W?J:void 0})}),[cn,sn,ln,W,J,un,H]),fn=(0,c.useCallback)((function(){var n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return K((0,o.Z)((0,o.Z)({},e),{},{style:(0,o.Z)((0,o.Z)({},e.style),{},(n={},(0,t.Z)(n,s.j.arrowSize.var,D?"".concat(D,"px"):void 0),(0,t.Z)(n,s.j.arrowShadowColor.var,I),n))}),r)}),[K,D,I]),vn=(0,c.useCallback)((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=(0,o.Z)((0,o.Z)({},n.style),{},{position:"relative",transformOrigin:s.j.transformOrigin.varRef});return(0,o.Z)((0,o.Z)((0,o.Z)({ref:e},F),n),{},{id:J,role:"tooltip",style:r})}),[F,J]);return{isOpen:W,show:cn,hide:sn,getTriggerProps:pn,getTooltipProps:vn,getTooltipPositionerProps:fn,getArrowProps:V,getArrowInnerProps:X}}((0,o.Z)((0,o.Z)({},z),{},{direction:C.direction}));if("string"===typeof E||T)Y=c.createElement(l.m$.span,(0,o.Z)({display:"inline-block",tabIndex:0},W.getTriggerProps()),E);else{var $=c.Children.only(E);Y=(0,c.cloneElement)($,W.getTriggerProps($.props,$.ref))}var B=!!S,U=W.getTooltipProps({},e),H=B?function(n){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=Object.assign({},n),o=(0,a.Z)(r);try{for(o.s();!(e=o.n()).done;){var i=e.value;i in t&&delete t[i]}}catch(c){o.e(c)}finally{o.f()}return t}(U,["role","id"]):U,K=function(n,e){var r,t={},o=(0,a.Z)(e);try{for(o.s();!(r=o.n()).done;){var i=r.value;i in n&&(t[i]=n[i])}}catch(c){o.e(c)}finally{o.f()}return t}(U,["role","id"]);return k?c.createElement(c.Fragment,null,Y,c.createElement(f.M,null,W.isOpen&&c.createElement(u.h_,(0,o.Z)({},I),c.createElement(l.m$.div,(0,o.Z)((0,o.Z)({},W.getTooltipPositionerProps()),{},{__css:{zIndex:P.zIndex,pointerEvents:"none"}}),c.createElement(w,(0,o.Z)((0,o.Z)((0,o.Z)({variants:b,initial:"exit",animate:"enter",exit:"exit"},N),H),{},{__css:P}),k,B&&c.createElement(l.m$.span,(0,o.Z)({srOnly:!0},K),S),A&&c.createElement(l.m$.div,{"data-popper-arrow":!0,className:"chakra-tooltip__arrow-wrapper"},c.createElement(l.m$.div,{"data-popper-arrow-inner":!0,className:"chakra-tooltip__arrow",__css:{bg:P.bg}}))))))):c.createElement(c.Fragment,null,E)}));y.displayName="Tooltip"}}]);